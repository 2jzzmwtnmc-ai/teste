<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Countdown</title>
  <style>
    body{
      margin:0;height:100vh;display:flex;align-items:center;justify-content:center;
      font-family:Calibri,Arial,sans-serif;background:#fff;
    }
    #wrap{text-align:center}
    #titulo{font-size:24px;margin-bottom:8px;color:#555}
    #contador{font-size:64px;font-weight:600}
  </style>
</head>
<body>

<div id="wrap">
  <div id="titulo"></div>
  <div id="contador">carregando...</div>
</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const endParam = params.get("end");      // YYYY-MM-DDTHH:mm:ss
  const label = params.get("label") || ""; // texto opcional

  if (label) document.getElementById("titulo").innerText = label;

  if (!endParam) {
    document.getElementById("contador").innerText = "data inv치lida";
    throw new Error("Par칙metro end ausente");
  }

  const endDate = new Date(endParam);
  if (isNaN(endDate.getTime())) {
    document.getElementById("contador").innerText = "data inv치lida";
    throw new Error("Formato inv치lido");
  }

  function atualizar(){
    const now = new Date();
    let diffMs = endDate.getTime() - now.getTime();

    if (diffMs <= 0) {
      document.getElementById("contador").innerText = "0d 0h 0m 0s";
      return;
    }

    const totalSeconds = Math.floor(diffMs / 1000);
    const dias  = Math.floor(totalSeconds / 86400);
    const horas = Math.floor((totalSeconds % 86400) / 3600);
    const min   = Math.floor((totalSeconds % 3600) / 60);
    const seg   = totalSeconds % 60;

    document.getElementById("contador").innerText =
      `${dias}d ${horas}h ${min}m ${seg}s`;
  }

  atualizar();
  setInterval(atualizar, 1000);
</script>

</body>
</html>
