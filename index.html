<script>
  const params = new URLSearchParams(window.location.search);

  // Datas
  const endDate = new Date(params.get("end"));
  const now     = new Date(params.get("start"));

  // ParÃ¢metros de horas (fallback se nÃ£o vier nada)
  const GREEN_LIMIT  = Number(params.get("green"))  || 10;
  const YELLOW_LIMIT = Number(params.get("yellow")) || 5;

  const contador = document.getElementById("contador");

  let diff = Math.max(0, endDate - now);

  function atualizar() {
    let temp = diff;

    const dias  = Math.floor(temp / (1000 * 60 * 60 * 24));
    temp %= (1000 * 60 * 60 * 24);

    const horas = Math.floor(temp / (1000 * 60 * 60));
    temp %= (1000 * 60 * 60);

    const min = Math.floor(temp / (1000 * 60));
    temp %= (1000 * 60);

    const seg = Math.floor(temp / 1000);

    contador.innerText = `${dias}d ${horas}h ${min}m ${seg}s`;

    // ðŸ”¥ TOTAL DE HORAS RESTANTES (decimal)
    const totalHoras = diff / (1000 * 60 * 60);

    // ðŸŽ¨ LÃ“GICA DE CORES
    if (totalHoras < YELLOW_LIMIT) {
      contador.style.color = "#E53935"; // vermelho
    } else if (totalHoras < GREEN_LIMIT) {
      contador.style.color = "#FBC02D"; // amarelo
    } else {
      contador.style.color = "#707070"; // padrÃ£o
    }

    diff = Math.max(0, diff - 1000);
  }

  atualizar();
  setInterval(atualizar, 1000);
</script>
